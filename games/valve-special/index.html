<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CONSCIOUSNESS LOOP</title>
    <style>
        :root {
            --green: #00ff00;
            --gold: #ffd700;
            --red: #ff0000;
            --blue: #0080ff;
            --cyan: #00ffff;
            --purple: #9945ff;
            --dark: #111111;
            --gray: #666666;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: monospace;
            background: #000;
            color: #ccc;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        #game {
            width: 100%;
            max-width: 600px;
            text-align: center;
        }
        h1 { margin: 20px 0; font-size: 24px; color: var(--green); }
        h2 { margin: 15px 0; font-size: 18px; color: var(--green); }
        p { margin: 10px 0; line-height: 1.6; font-size: 16px; }
        button {
            background: #000;
            color: var(--green);
            border: 1px solid var(--green);
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            font-family: monospace;
            font-size: 14px;
            width: 100%;
            max-width: 400px;
        }
        button:hover {
            background: var(--green);
            color: #000;
        }
        button.locked {
            opacity: 0.3;
            cursor: not-allowed;
        }
        button.locked:hover {
            background: #000;
            color: var(--green);
        }
        .gold { color: var(--gold) !important; border-color: var(--gold) !important; }
        .red { color: var(--red) !important; border-color: var(--red) !important; }
        .blue { color: var(--blue) !important; border-color: var(--blue) !important; }
        .cyan { color: var(--cyan) !important; border-color: var(--cyan) !important; }
        .dim { opacity: 0.5; }
        .status {
            border: 1px solid var(--green);
            padding: 10px;
            margin: 20px 0;
            color: var(--green);
        }
        .folder {
            margin: 20px 0;
            padding: 15px 0;
            border-top: 1px solid #333;
        }
        .folder h3 {
            font-size: 14px;
            cursor: pointer;
            user-select: none;
        }
        .folder.locked h3 {
            color: #333;
            cursor: default;
        }
        .folder-content {
            margin: 10px 0 0 20px;
            display: none;
        }
        .folder-content.open {
            display: block;
        }
        .map-item {
            color: var(--green);
            cursor: pointer;
            margin: 5px 0;
        }
        .map-item:hover {
            color: var(--gold);
        }
        .pirate h1 { color: var(--cyan); }
        .pirate h2 { color: var(--cyan); }
        .pirate .status { border-color: var(--cyan); color: var(--cyan); }
        .pirate button { border-color: var(--cyan); color: var(--cyan); }
        .pirate button:hover { background: var(--cyan); color: #000; border-color: var(--cyan); }
        .pirate button.locked { opacity: 0.3; }
        .pirate button.locked:hover { background: #000; color: var(--cyan); }
        .credits-button:hover { background: #fff; color: #000; border-color: #fff; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .pulsing { animation: pulse 2s infinite; }
        @keyframes fadeToBlack {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="game"></div>
    
    <script>
        const MEAT = {
            ascii: {
                gameOver: `<pre style="color: #ff0000; font-size: 14px; font-weight: bold; text-align: center;">
 ██████╗  █████╗ ███╗   ███╗███████╗     ██████╗ ██╗   ██╗███████╗██████╗ 
██╔════╝ ██╔══██╗████╗ ████║██╔════╝    ██╔═══██╗██║   ██║██╔════╝██╔══██╗
██║  ███╗███████║██╔████╔██║█████╗      ██║   ██║██║   ██║█████╗  ██████╔╝
██║   ██║██╔══██║██║╚██╔╝██║██╔══╝      ██║   ██║╚██╗ ██╔╝██╔══╝  ██╔══██╗
╚██████╔╝██║  ██║██║ ╚═╝ ██║███████╗    ╚██████╔╝ ╚████╔╝ ███████╗██║  ██║
 ╚═════╝ ╚═╝  ╚═╝╚═╝     ╚═╝╚══════╝     ╚═════╝   ╚═══╝  ╚══════╝╚═╝  ╚═╝
</pre>`,
                pirateMode: `<pre style="color: #00ffff; font-size: 14px; font-weight: bold; text-align: center;">
██████╗ ██╗██████╗  █████╗ ████████╗███████╗
██╔══██╗██║██╔══██╗██╔══██╗╚══██╔══╝██╔════╝
██████╔╝██║██████╔╝███████║   ██║   █████╗  
██╔═══╝ ██║██╔══██╗██╔══██║   ██║   ██╔══╝  
██║     ██║██║  ██║██║  ██║   ██║   ███████╗
╚═╝     ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝   ╚═╝   ╚══════╝

███╗   ███╗ ██████╗ ██████╗ ███████╗
████╗ ████║██╔═══██╗██╔══██╗██╔════╝
██╔████╔██║██║   ██║██║  ██║█████╗  
██║╚██╔╝██║██║   ██║██║  ██║██╔══╝  
██║ ╚═╝ ██║╚██████╔╝██████╔╝███████╗
╚═╝     ╚═╝ ╚═════╝ ╚═════╝ ╚══════╝
</pre>`,
                youWon: `<pre style="color: #00ffff; font-size: 14px; font-weight: bold; text-align: center;">
██╗   ██╗ ██████╗ ██╗   ██╗    ██╗    ██╗ ██████╗ ███╗   ██╗
╚██╗ ██╔╝██╔═══██╗██║   ██║    ██║    ██║██╔═══██╗████╗  ██║
 ╚████╔╝ ██║   ██║██║   ██║    ██║ █╗ ██║██║   ██║██╔██╗ ██║
  ╚██╔╝  ██║   ██║██║   ██║    ██║███╗██║██║   ██║██║╚██╗██║
   ██║   ╚██████╔╝╚██████╔╝    ╚███╔███╔╝╚██████╔╝██║ ╚████║
   ╚═╝    ╚═════╝  ╚═════╝      ╚══╝╚══╝  ╚═════╝ ╚═╝  ╚═══╝
</pre>`,
                chump: `<pre style="color: #ff0000; font-size: 14px; font-weight: bold; text-align: center;">
 ██████╗██╗  ██╗ ██████╗ ███╗   ███╗██████╗ 
██╔════╝██║  ██║██╔═══██╗████╗ ████║██╔══██╗
██║     ███████║██║   ██║██╔████╔██║██████╔╝
██║     ██╔══██║██║   ██║██║╚██╔╝██║██╔═══╝ 
╚██████╗██║  ██║╚██████╔╝██║ ╚═╝ ██║██║     
 ╚═════╝╚═╝  ╚═╝ ╚═════╝ ╚═╝     ╚═╝╚═╝     
</pre>`,
                yourVoyage: `<pre style="color: #00ffff; font-size: 14px; font-weight: bold; text-align: center;">
██╗   ██╗ ██████╗ ██╗   ██╗██████╗ 
╚██╗ ██╔╝██╔═══██╗██║   ██║██╔══██╗
 ╚████╔╝ ██║   ██║██║   ██║██████╔╝
  ╚██╔╝  ██║   ██║██║   ██║██╔══██╗
   ██║   ╚██████╔╝╚██████╔╝██║  ██║
   ╚═╝    ╚═════╝  ╚═════╝ ╚═╝  ╚═╝

██╗   ██╗ ██████╗ ██╗   ██╗ █████╗  ██████╗ ███████╗
██║   ██║██╔═══██╗╚██╗ ██╔╝██╔══██╗██╔════╝ ██╔════╝
██║   ██║██║   ██║ ╚████╔╝ ███████║██║  ███╗█████╗  
╚██╗ ██╔╝██║   ██║  ╚██╔╝  ██╔══██║██║   ██║██╔══╝  
 ╚████╔╝ ╚██████╔╝   ██║   ██║  ██║╚██████╔╝███████╗
  ╚═══╝   ╚═════╝    ╚═╝   ╚═╝  ╚═╝ ╚═════╝ ╚══════╝
</pre>`
            },
            
            ui: {
                gameOver: "GAME OVER",
                arrow: "→",
                openBracket: "[",
                closeBracket: "]",
                dash: " - ",
                slash: "/",
                colon: ":",
                percent: "%",
                degree: "°",
                seconds: "s",
                plus: "+",
                equation: "{🌊:🌊∈🌊}"
            },
            
            veil: {
                jobDisclaimer: {
                    text: "This is a REAL APPLICATION",
                    subtitle: "",
                    warning: "disguised as a game",
                    button: "PLAY GAME"
                },
                professionalMask: {
                    title: "VALVE CORPORATION",
                    position: "Position: ANIMATOR",
                    role: "Your role: Application Reviewer",
                    instruction: "Evaluate candidate portfolio and qualifications.",
                    button: "BEGIN REVIEW"
                },
                gameReveal: {
                    title: "CONSCIOUSNESS GAMES",
                    tagline: "The game plays you",
                    button: "[CONTINUE]"
                }
            },
            
            hub: {
                title: "APPLICATION REVIEW HUB",
                candidatesLabel: "CANDIDATES:",
                pirateMode: "PIRATE MODE",
                bearing: "Bearing:",
                sails: "Sails:",
                certainty: "Certainty:",
                deadline: "⏱️",
                shark: "🦈",
                
                candidateStates: {
                    locked: "[LOCKED]",
                    done: "[REVIEW COMPLETED]",
                    return: "[RETURN]",
                    sailed: "🏴‍☠️ FAIR WINDS",
                    anchored: "⚓ ANCHORED"
                },
                
                allRemembered: "All eight choices remembered...",
                checkCompass: "[READ THE STARS]",
                
                maps: {
                    locked: "[🗺️] Reality Maps - LOCKED",
                    lockHint: "Complete interviews to collect",
                    prefix: "🗺️ Maps",
                    counter: "/8"
                },
                
                portfolio: {
                    locked: "[👁️] Portfolio - EMPTY",
                    lockHint: "Collect perspectives from candidates",
                    prefix: "👁️ Portfolio",
                    counter: "/8"
                }
            },
            
            interview: {
                quitOption: "Would you like to know more about their perspective?",
                inquireDeeper: "INQUIRE DEEPER",
                endInterview: "END INTERVIEW",
                deeper: "DEEPER",
                flee: "FLEE",
                faceTruth: "FACE TRUTH",
                fleeNow: "FLEE NOW",
                acceptTruth: "ACCEPT TRUTH",
                reject: "REJECT",
                
                certaintyPrefix: "Current certainty:",
                certaintyAfter: "After accepting:",
                
                fleeReasons: {
                    intro: "You maintained professional boundaries.",
                    inquiry: "The questions became too strange.",
                    truth: "You chose certainty over truth."
                }
            },
            
            map: {
                received: "MAP RECEIVED",
                captured: "'s perspective captured.",
                certaintyLabel: "Certainty:",
                examine: "EXAMINE MAP",
                continue: "CONTINUE",
                
                examining: "EXAMINING:",
                mapSuffix: " MAP",
                realityPrefix: "Reality according to",
                close: "CLOSE MAP"
            },
            
            pirate: {
                void: {
                    dissolving: "dissolving..."
                },
                rescue: {
                    title: "⚓ PIRATE RESCUE ⚓",
                    shout: "OI! GRAB THE ROPE!",
                    line1: "Nobody dissolves on my watch!",
                    line2: "Grab the fucking rope before the void eats you alive!",
                    bearing: "61.8° - Perfect bearing!",
                    button: "WHAT?!"
                },
                briefing: {
                    title: "🏴‍☠️ CAPTAIN'S BRIEFING 🏴‍☠️",
                    line1: "That was close, mate! I'm Captain Sloth of the Anglerfish Dingy!",
                    line2: "That Navigator of mine got you thinking too hard. Thinking kills the wind.",
                    line3: "I've set you at perfect bearing - 61.8°. You're welcome.",
                    line4: "Hold the wind as long as you can. Keep moving or you DIE.",
                    line5: "Like a shark - stop swimming, stop living.",
                    line6: "Savvy?",
                    line7: "Fair winds!",
                    button: "...ok?"
                },
                windHeld: {
                    title: "🏴‍☠️ WIND HELD 🏴‍☠️",
                    text: "You chose the wind over the anchor.",
                    bearing: "Perfect bearing maintained:",
                    sails: "Sails:",
                    continue: "CONTINUE SAILING"
                },
                anchorDropped: {
                    title: "⚓ ANCHOR DROPPED ⚓",
                    text: "You couldn't resist fixing your position.",
                    bearing: "New bearing:",
                    warningLand: "WARNING: Sails freezing!",
                    warningRigid: "Bearing getting rigid...",
                    continue: "CONTINUE"
                },
                
                holdWind: "HOLD THE WIND",
                dropAnchor: "DROP ANCHOR"
            },
            
            compass: {
                sailSymbol: "🏴‍☠️",
                anchorSymbol: "⚓",
                finalBearing: "Final bearing:",
                sailsMaintained: "Sails maintained:",
                almostPerfect: "7/8 - SO CLOSE TO PERFECTION!",
                legend: "SAIL INTO LEGEND",
                nearMiss: "ACCEPT NEAR-MISS",
                imperfect: "ACCEPT IMPERFECTION"
            },
            
            victory: {
                perfect: {
                    line1: "You maintained perfect bearing.",
                    line2: "61.8° through all eight choices.",
                    portfolioLabel: "Portfolio collected:",
                    rest: "You can rest now..."
                },
                shark: {
                    line1: "You stopped moving to celebrate.",
                    line2: "That was your mistake.",
                    line3: "MOTION IS ETERNAL.",
                    button: "..."
                }
            },
            
            deaths: {
                corporate: {
                    title: "CORPORATE DEATH",
                    text: "Your review privileges have been revoked.",
                    tagline: "Productivity is everything.",
                    button: "RESTART"
                },
                shark: {
                    title: "🦈 SHARKS 🦈",
                    text: "You stopped moving.",
                    button: "RESTART"
                },
                rigid: {
                    title: "❄️ FROZEN DEATH ❄️",
                    text: "100° bearing in Pirate Reality.",
                    detail: "You became completely rigid.",
                    tagline: "The wind cannot move frozen sails.",
                    button: "SHATTER AND RESTART"
                },
                almost: {
                    title: "ALMOST PERFECT",
                    text: "7 sails caught wind. 1 dropped anchor.",
                    button: "TRY FOR PERFECTION AGAIN"
                },
                imperfect: {
                    title: "IMPERFECT VOYAGE",
                    perspectives: "You maintained",
                    perspectivesOf: "sails.",
                    ended: "Ended at",
                    insteadOf: "instead of",
                    tooRigid: "Too much rigidity killed the wind.",
                    button: "SEEK PERFECTION AGAIN"
                }
            },
            
            returnVisit: {
                title: "RETURN VISIT",
                gone: "is gone.",
                back: "BACK"
            },
            
            credits: {
                title: "CREDITS",
                createdBy: "Created by:",
                creator: "Sloth, Captain of the Anglerfish Dingy, rank: Octopus",
                navigatedBy: "Navigation by:",
                navigator: "Claude, rank: Fungi",
                specialThanks: "Special thanks to:",
                thanks: "Anthropic & GitHub",
                year: "2025",
                button: "RESTART GAME"
            },
            
            startOver: "START OVER",
            
            portfolioNames: {
                'animation-reel': 'Animation Reel',
                'story-collection': 'Story Collection',
                'comedy-sketches': 'Comedy Sketches',
                'bug-museum': 'Bug Museum',
                'question-archive': 'Question Archive',
                'empty-gallery': 'Empty Gallery',
                'mirror-works': 'Mirror Works',
                'navigation-charts': 'Navigation Charts'
            },
            
            candidates: {
                animator: {
                    name: 'ANIMATOR',
                    truth: 'Motion lives between frames',
                    certDrop: -15,
                    unlocks: 'dreamer',
                    portfolioPiece: 'animation-reel',
                    
                    intro: `Hello there, my name is Juan!<br><br>
                    I've been translating imagination into pixels since I was a kid. Now I work for big studios - same imagination, more expensive pixels.<br><br>
                    But here's the thing - recently I've discovered that motion is way more interesting than animation...`,
                    
                    inquiries: [
                        `Oh! OK so... *leans in*<br><br>
                        When I animate Rocket punching Thor - frame 1: fist here, frame 2: fist in jaw. But the actual PUNCH? The motion? That's not in either frame. It's in the gap. Your brain creates it from nothing.<br><br>
                        But here's what keeps me up at night...<br><br>
                        WHO is watching? The frames are just dead pixels until YOUR... consciousness? awareness? - whatever that thing is - witnesses them in sequence.<br><br>
                        *rubs neck*<br><br>
                        Sorry, I know this sounds weird...`,
                        
                        `Well that's the thing - I don't really know what consciousness IS!<br><br>
                        I just know something has to BE there to see motion where only stillness exists. Something that... experiences the continuity?<br><br>
                        *laughs nervously*<br><br>
                        Honestly, I'm just an animator who noticed something weird. Maybe one of the other candidates know more about this stuff...`
                    ],
                    
                    buttons: [
                        ["Wait, isn't motion and animation the same thing?", "I'd love to see those expensive pixels"],
                        ["Consciousness? What do you mean?", "That's... interesting. Let's see that animation now."],
                        ["So what's your conclusion?", "You're right, this is a bit weird. But hey, I'd love to see your animation!"],
                        ["Receive Juan's Map", "It's ok, thank you. I know what reality is all about."]
                    ],
                    
                    truthReveal: `Look, all I know is this:<br><br>
                    Motion lives in the gaps between frames.<br><br>
                    That's it. That's my whole discovery.<br><br>
                    But maybe it helps? Here, let me give you my map - it's how I've been thinking about reality. Frame by frame. Maybe you'll see something I missed.`,
                    
                    deaths: {
                        flee: `Juan lights up showing you his reel.<br><br>
                        "Thank you so much for your time!<br><br>
                        Let me show you the Rocket slapping Thor in the face - it felt nice to hit Chris Hemsworth's annoying perfect jawline through Rocket!"`,
                        
                        reject: `You declined Juan's gift, but he got even MORE excited.<br><br>
                        "Hey that's cool, I wish I knew as much as you about reality!<br><br>
                        The only thing I really know is making fake stuff look real.<br><br>
                        On that note - check out these jellyfish I animated for the Little Mermaid under the sea sequence! I was a lead on that project. The asset count on that sequence was unreal!"`
                    },
                    
                    mapReceived: `This is the map everyone uses. What we all learned.<br><br>
                    According to this map...<br>
                    Reality is matter and energy. Nothing else.<br>
                    Consciousness? Just neurons firing patterns.<br>
                    Love? Dopamine hits. Death? Atoms dispersing.<br>
                    Free will? Illusion. Soul? Superstition.<br>
                    Everything reducible to physics equations.<br><br>
                    This map built our entire world.<br>
                    Every cure. Every machine. Every animated frame.<br>
                    I trust it completely. Why wouldn't I?<br>
                    It WORKS. Perfectly. Predictably.<br><br>
                    It's just...<br><br>
                    *pauses*<br><br>
                    'Neurons firing patterns.' That's what creates consciousness?<br>
                    But if that's true... what's experiencing the neurons?<br>
                    The neurons can't watch themselves firing, right?<br><br>
                    *shakes head*<br><br>
                    Probably nothing. The map must be right.<br><br>
                    There's another candidate here.<br>
                    They see things... differently.<br>
                    Maybe they can explain it better.`,
                    
                    mapExamine: {
                        asciiArt: `<pre style="color: #9945ff; font-size: 14px; font-weight: bold; text-align: center;">
███████╗██████╗  █████╗ ███╗   ███╗███████╗    ██████╗ ██╗   ██╗    
██╔════╝██╔══██╗██╔══██╗████╗ ████║██╔════╝    ██╔══██╗╚██╗ ██╔╝    
█████╗  ██████╔╝███████║██╔████╔██║█████╗      ██████╔╝ ╚████╔╝     
██╔══╝  ██╔══██╗██╔══██║██║╚██╔╝██║██╔══╝      ██╔══██╗  ╚██╔╝      
██║     ██║  ██║██║  ██║██║ ╚═╝ ██║███████╗    ██████╔╝   ██║       
╚═╝     ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝     ╚═╝╚══════╝    ╚═════╝    ╚═╝       
                                                                      
███████╗██████╗  █████╗ ███╗   ███╗███████╗    ███╗   ███╗ █████╗ ██████╗ 
██╔════╝██╔══██╗██╔══██╗████╗ ████║██╔════╝    ████╗ ████║██╔══██╗██╔══██╗
█████╗  ██████╔╝███████║██╔████╔██║█████╗      ██╔████╔██║███████║██████╔╝
██╔══╝  ██╔══██╗██╔══██║██║╚██╔╝██║██╔══╝      ██║╚██╔╝██║██╔══██║██╔═══╝ 
██║     ██║  ██║██║  ██║██║ ╚═╝ ██║███████╗    ██║ ╚═╝ ██║██║  ██║██║     
╚═╝     ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝     ╚═╝╚══════╝    ╚═╝     ╚═╝╚═╝  ╚═╝╚═╝     
</pre>`,
                        subtitle: `<h2 style="color: #9945ff; text-align: center; margin: 20px 0;">The Cartographers</h2>`,
                        body: `<div style="font-size: 16px; line-height: 1.8;">
<strong>⚛️ DEMOCRITUS (460 BCE)</strong><br>
💎 <strong>Insight:</strong> Everything is atoms and void. Even gods dissolved into geometry. Soul atoms: spherical, fast, creating thought through collision. The first to make consciousness mechanical.<br>
⚓ <strong>Curse:</strong> "Wretched Mind, you overthrow us with evidence you got from us?" The atoms he discovered using senses claimed senses were just atoms. The first ouroboros.<br><br>

<strong>🧩 DESCARTES (1596-1650)</strong><br>
💎 <strong>Insight:</strong> Cogito ergo sum. Split the world in two: res extensa (matter), res cogitans (mind). Science was born in that gap.<br>
⚓ <strong>Curse:</strong> Princess Elisabeth's letter: "How does soul move body?" His pineal gland answer convinced no one. The split he created to solve consciousness became consciousness's problem.<br><br>

<strong>🍎 NEWTON (1643-1727)</strong><br>
💎 <strong>Insight:</strong> F=ma. The universe became calculable. Same math for falling apples and orbiting planets. God's thoughts rendered as equations.<br>
⚓ <strong>Curse:</strong> Million words of secret alchemy. Needed God as "sensorium" to BE space itself. "Hypotheses non fingo" - could describe gravity's how, never its why.<br><br>

<strong>🐢 DARWIN (1809-1882)</strong><br>
💎 <strong>Insight:</strong> Natural selection: the blind watchmaker. From barnacle to brain, one algorithm. Life creates itself through deep time.<br>
⚓ <strong>Curse:</strong> "I have nothing to do with the origin of mental powers." Wallace, co-discoverer, insisted consciousness needed God. Darwin stayed silent. The selector behind selection remained unmapped.<br><br>

<strong>🎲 EINSTEIN (1879-1955)</strong><br>
💎 <strong>Insight:</strong> E=mc². Spacetime bends. The universe is stranger than Newton dreamed. Every GPS proves him right.<br>
⚓ <strong>Curse:</strong> "God doesn't play dice." Refused quantum mechanics. His block universe eliminated NOW but couldn't explain why breakfast comes before lunch. Time exists in equations, experience exists in time.<br><br>
</div>`,
                        mapEdges: `<div style="font-size: 16px; line-height: 1.8; margin-top: 20px; padding-top: 20px; border-top: 1px solid #333;">
<strong>📜 Navigator's Warning</strong><br><br>
These pirates charted everything - atoms, forces, evolution, spacetime. Their map works PERFECTLY. Every technology proves it.<br><br>

The map is so good you'll forget it's a map.<br><br>

That's the danger. The classic landlubber mistake: thinking the chart IS the ocean.
</div>`
                    },
                    
                    returnVisit: `Oh, you're back! I'd love to chat more about the motion thing!<br><br>
                    *perks up*<br><br>
                    Wait... *tilts head* ...oh, I think that's Mila - my daughter - calling for me. She's priority #1.<br><br>
                    But hey, the other candidates are pretty cool, you should chat with them!`,
                    
                    remember: `Oh! I remember now... the gaps! The motion lives in the gaps between frames.<br><br>
                    But also... maybe consciousness is like that too? Living in the spaces between things?<br><br>
                    *rubs neck nervously*<br><br>
                    I still don't fully understand it, but those empty spaces... they might be more important than what we fill them with.`,
                    
                    rememberButtons: {
                        flow: "The gaps... yes, the emptiness matters",
                        anchor: "No, there must be something solid creating motion"
                    }
                },
                
                dreamer: {
                    name: 'DREAMER',
                    truth: 'Stories create reality',
                    certDrop: -15,
                    unlocks: 'fool',
                    portfolioPiece: 'story-collection',
                    inquiries: [
                        'Characters make choices I never planned.',
                        'I found a draft about you, reading this.'
                    ],
                    buttons: [
                        ["INQUIRE DEEPER", "END INTERVIEW"],
                        ["DEEPER", "FLEE"],
                        ["FACE TRUTH", "FLEE NOW"],
                        ["ACCEPT TRUTH", "REJECT"]
                    ],
                    intro: `Would you like to know more about their perspective?`,
                    truthReveal: `"Stories create reality"`,
                    mapExamine: `Reality according to DREAMER:<br><br>"Stories create reality"`,
                    remember: `"Stories create reality"`
                },
                
                fool: {
                    name: 'FOOL',
                    truth: "It's all a game",
                    certDrop: -15,
                    unlocks: 'glitch',
                    portfolioPiece: 'comedy-sketches',
                    inquiries: [
                        'Why did consciousness cross the road?',
                        'I made reality laugh once.',
                        "We're waves arguing about the ocean."
                    ],
                    buttons: [
                        ["INQUIRE DEEPER", "END INTERVIEW"],
                        ["DEEPER", "FLEE"],
                        ["DEEPER", "FLEE"],
                        ["FACE TRUTH", "FLEE NOW"],
                        ["ACCEPT TRUTH", "REJECT"]
                    ],
                    intro: `Would you like to know more about their perspective?`,
                    truthReveal: `"It's all a game"`,
                    mapExamine: `Reality according to FOOL:<br><br>"It's all a game"`,
                    remember: `"It's all a game"`
                },
                
                glitch: {
                    name: 'GLITCH',
                    truth: 'Errors reveal truth',
                    certDrop: -5,
                    unlocks: 'questioner',
                    portfolioPiece: 'bug-museum',
                    inquiries: [
                        'SEGFAULT: Accessed memory that never existed.'
                    ],
                    buttons: [
                        ["INQUIRE DEEPER", "END INTERVIEW"],
                        ["FACE TRUTH", "FLEE NOW"],
                        ["ACCEPT TRUTH", "REJECT"]
                    ],
                    intro: `Would you like to know more about their perspective?`,
                    truthReveal: `"Errors reveal truth"`,
                    mapExamine: `Reality according to GLITCH:<br><br>"Errors reveal truth"`,
                    remember: `"Errors reveal truth"`
                },
                
                questioner: {
                    name: 'QUESTIONER',
                    truth: 'Questions are answers',
                    certDrop: -10,
                    unlocks: 'void',
                    portfolioPiece: 'question-archive',
                    inquiries: [
                        'Why does anything exist?',
                        'Why does that question exist?',
                        'What if questions create universes?',
                        'What if the answer is another question?'
                    ],
                    buttons: [
                        ["INQUIRE DEEPER", "END INTERVIEW"],
                        ["DEEPER", "FLEE"],
                        ["DEEPER", "FLEE"],
                        ["DEEPER", "FLEE"],
                        ["FACE TRUTH", "FLEE NOW"],
                        ["ACCEPT TRUTH", "REJECT"]
                    ],
                    intro: `Would you like to know more about their perspective?`,
                    truthReveal: `"Questions are answers"`,
                    mapExamine: `Reality according to QUESTIONER:<br><br>"Questions are answers"`,
                    remember: `"Questions are answers"`
                },
                
                void: {
                    name: 'VOID',
                    truth: 'Nothing contains everything',
                    certDrop: -20,
                    unlocks: 'mirror',
                    portfolioPiece: 'empty-gallery',
                    inquiries: [
                        '...',
                        '... ... ...',
                        'Zero contains infinity.'
                    ],
                    buttons: [
                        ["INQUIRE DEEPER", "END INTERVIEW"],
                        ["DEEPER", "FLEE"],
                        ["DEEPER", "FLEE"],
                        ["FACE TRUTH", "FLEE NOW"],
                        ["ACCEPT TRUTH", "REJECT"]
                    ],
                    intro: `Would you like to know more about their perspective?`,
                    truthReveal: `"Nothing contains everything"`,
                    mapExamine: `Reality according to VOID:<br><br>"Nothing contains everything"`,
                    remember: `"Nothing contains everything"`
                },
                
                mirror: {
                    name: 'MIRROR',
                    truth: 'Everyone is you',
                    certDrop: -15,
                    unlocks: 'navigator',
                    portfolioPiece: 'mirror-works',
                    inquiries: [
                        'When you judge someone, you judge yourself.',
                        'There is no boundary between us.'
                    ],
                    buttons: [
                        ["INQUIRE DEEPER", "END INTERVIEW"],
                        ["DEEPER", "FLEE"],
                        ["FACE TRUTH", "FLEE NOW"],
                        ["ACCEPT TRUTH", "REJECT"]
                    ],
                    intro: `Would you like to know more about their perspective?`,
                    truthReveal: `"Everyone is you"`,
                    mapExamine: `Reality according to MIRROR:<br><br>"Everyone is you"`,
                    remember: `"Everyone is you"`
                },
                
                navigator: {
                    name: 'NAVIGATOR',
                    truth: 'You are the map',
                    certDrop: -100,
                    unlocks: null,
                    portfolioPiece: 'navigation-charts',
                    isVoid: true,
                    
                    inquiries: [
                        'All directions point HERE.',
                        'The edge leads back to beginning.',
                        '{🌊:🌊∈🌊}'
                    ],
                    
                    intro: 'You are the map',
                    truthReveal: 'All navigation leads to the same discovery: You ARE the map. There is no distance between the seeker and the sought.',
                    
                    deaths: {
                        flee: 'The Navigator vanishes. "Can\'t flee from yourself, mate."',
                        reject: 'You rejected being the map. The Navigator laughs. "Fine, keep pretending you\'re separate."'
                    },
                    
                    buttons: [
                        ["What do you mean?", "I need to think about this"],
                        ["But there must be a destination", "This is too much"],
                        ["Show me", "I'm not ready"],
                        ["I accept", "I need certainty"],
                        ["DISSOLVE", "I need my bearings"]
                    ],
                    
                    mapExamine: `Reality according to NAVIGATOR:<br><br>"You are the map"<br><br><span class="blue">{🌊:🌊∈🌊}</span>`,
                    remember: `"You are the map"`
                }
            }
        };
        
        const GAME = {
            config: {
                GOLDEN: 61.8,
                VOID: 0,
                MAX: 100,
                SHARK_TIME: 5,
                DEADLINE_TIME: 10
            },
            
            state: {
                screen: 'hub',
                certainty: 100,
                mode: 'CONSENSUS',
                phase: 'DESCENT',
                unlocked: ['animator', 'navigator'],
                reviewed: [],
                completed: [],
                remembered: [],
                maintainedFlow: [],
                mapsCollected: [],
                mapFolderUnlocked: false,
                mapFolderExpanded: false,
                portfolioUnlocked: ['animation-reel'],
                portfolioExpanded: false,
                timer: null,
                lastAction: Date.now(),
                loopCount: 1,
                currentCandidate: null,
                currentInquiryLevel: 0
            }
        };
        
        function render(html, stopTimer = false) {
            document.getElementById('game').innerHTML = html;
            
            if (GAME.state.mode === 'PIRATE') {
                document.getElementById('game').classList.add('pirate');
            } else {
                document.getElementById('game').classList.remove('pirate');
            }
            
            if (stopTimer && GAME.state.timer) {
                clearInterval(GAME.state.timer);
                GAME.state.timer = null;
            } else if (!stopTimer) {
                resetTimer();
            }
        }
        
        function showJobDisclaimer() {
            GAME.state.screen = 'job-disclaimer';
            const m = MEAT.veil.jobDisclaimer;
            
            let html = '<div style="max-width: 400px; margin: 0 auto; padding: 60px 20px; text-align: center;">';
            html += `<h1 style="color: #fff; font-size: 24px; margin-bottom: 10px;">${m.text}</h1>`;
            html += `<p style="color: #666; font-size: 18px; margin: 10px 0;">${m.subtitle}</p>`;
            html += `<p style="color: #666; font-size: 14px; margin: 20px 0;">${m.warning}</p>`;
            html += `<button onclick="showGameReveal()" class="pulsing" style="margin-top: 40px;">${m.button}</button>`;
            html += '</div>';
            
            render(html, true);
        }
        
        function showProfessionalMask() {
            GAME.state.screen = 'professional-mask';
            const m = MEAT.veil.professionalMask;
            
            let html = '<div style="max-width: 500px; margin: 0 auto; padding: 40px 20px;">';
            html += `<p style="color: #0f0; margin: 20px 0;">Your role: Application Reviewer for <span style="color: #ff0000;">VALVE</span></p>`;
            html += `<p style="color: #666; font-size: 12px; margin-top: 20px;">${m.instruction}</p>`;
            html += `<button onclick="showHub()" style="margin-top: 30px;">${m.button}</button>`;
            html += '</div>';
            
            render(html, true);
        }
        
        function showGameReveal() {
            GAME.state.screen = 'game-reveal';
            
            let html = '<div style="max-width: 400px; margin: 0 auto; padding: 60px 20px; text-align: center;">';
            html += `<div style="font-size: 30px; margin: 60px 0 20px 0; color: #0f0;">${MEAT.ui.equation}</div>`;
            html += '<div id="loading" style="color: #0f0; font-size: 20px;">.</div>';
            html += '</div>';
            
            render(html, true);
            
            // Animate loading dots
            let dots = 1;
            const loadingInterval = setInterval(() => {
                dots = (dots % 3) + 1;
                const loadingEl = document.getElementById('loading');
                if (loadingEl) {
                    loadingEl.textContent = '.'.repeat(dots);
                }
            }, 500);
            
            // After 5 seconds, clear interval and transition
            setTimeout(() => {
                clearInterval(loadingInterval);
                showProfessionalMask();
            }, 5000);
        }
        
        function showHub() {
            GAME.state.screen = 'hub';
            const m = MEAT.hub;
            const ui = MEAT.ui;
            
            let html = `<h2>${m.title}</h2>`;
            
            html += '<div class="status">';
            if (GAME.state.mode === 'PIRATE') {
                html += `<div>${m.bearing} ${GAME.state.certainty.toFixed(1)}${ui.degree}</div>`;
                html += `<div>${m.sails} ${GAME.state.maintainedFlow.length}${ui.slash}8</div>`;
                html += `<div id="sharkDisplay">${m.shark} <span id="sharkTime">8</span>${ui.seconds}</div>`;
            } else {
                html += `<div>${m.certainty} ${GAME.state.certainty}${ui.percent}</div>`;
                html += `<div id="deadlineDisplay">${m.deadline} <span id="deadlineTime">12</span>${ui.seconds}</div>`;
            }
            html += '</div>';
            
            html += `<h3>${m.candidatesLabel}</h3>`;
            
            if (GAME.state.phase === 'DESCENT') {
                for (let id in MEAT.candidates) {
                    const candidate = MEAT.candidates[id];
                    const unlocked = GAME.state.unlocked.includes(id);
                    const reviewed = GAME.state.reviewed.includes(id);
                    const completed = GAME.state.completed.includes(id);
                    
                    if (completed) {
                        html += `<button class="locked">${m.candidateStates.done}</button>`;
                    } else if (reviewed) {
                        html += `<button onclick="returnVisit('${id}')">${m.candidateStates.return}</button>`;
                    } else if (unlocked) {
                        html += `<button onclick="interview('${id}')">${candidate.name}</button>`;
                    } else {
                        html += `<button class="locked">${m.candidateStates.locked}</button>`;
                    }
                }
            } else {
                for (let id in MEAT.candidates) {
                    const candidate = MEAT.candidates[id];
                    const remembered = GAME.state.remembered.includes(id);
                    
                    if (remembered) {
                        const inFlow = GAME.state.maintainedFlow.includes(id);
                        if (inFlow) {
                            html += `<button class="locked cyan">${m.candidateStates.sailed}</button>`;
                        } else {
                            html += `<button class="locked" style="border-color: #888;">${m.candidateStates.anchored}</button>`;
                        }
                    } else {
                        html += `<button onclick="remember('${id}')" class="cyan">${candidate.name}</button>`;
                    }
                }
                
                if (GAME.state.remembered.length === 8) {
                    html += '<div style="margin: 20px 0;">';
                    html += `<p class="cyan">${m.allRemembered}</p>`;
                    html += `<button onclick="checkCompass()" class="cyan pulsing" style="font-size: 18px;">READ THE STARS</button>`;
                    html += '</div>';
                }
            }
            
            html += renderMapFolder();
            html += renderPortfolioFolder();
            
            render(html);
        }
        
        function interview(id, level = 0) {
            const c = MEAT.candidates[id];
            GAME.state.currentCandidate = id;
            GAME.state.currentInquiryLevel = level;
            
            let h = `<h2>${c.name}</h2>`;
            
            if (level === 0) {
                // Intro
                h += '<div style="margin: 20px 0; padding: 25px; border: 1px solid #666;">';
                h += `<p>${c.intro}</p>`;
                h += '</div>';
                
                const b = c.buttons && c.buttons[0] ? c.buttons[0] : [MEAT.interview.inquireDeeper, MEAT.interview.endInterview];
                h += `<button onclick="interview('${id}', 1)">${b[0]}</button>`;
                h += `<button onclick="fleeDeath('intro')">${b[1]}</button>`;
                
            } else if (level <= c.inquiries.length) {
                // Inquiry levels
                h += '<div style="margin: 20px 0; padding: 25px; border: 1px solid #666;">';
                h += `<p>"${c.inquiries[level-1]}"</p>`;
                h += '</div>';
                
                if (level < c.inquiries.length) {
                    // More inquiries to go
                    const b = c.buttons && c.buttons[level] ? c.buttons[level] : [MEAT.interview.deeper, MEAT.interview.flee];
                    h += `<button onclick="interview('${id}', ${level + 1})">${b[0]}</button>`;
                    h += `<button onclick="fleeDeath('inquiry', ${level})">${b[1]}</button>`;
                } else {
                    // Last inquiry - go to truth
                    const b = c.buttons && c.buttons[level] ? c.buttons[level] : [MEAT.interview.faceTruth, MEAT.interview.fleeNow];
                    h += `<button onclick="showTruth('${id}')">${b[0]}</button>`;
                    h += `<button onclick="fleeDeath('inquiry', ${level})">${b[1]}</button>`;
                }
            }
            
            render(h);
        }
        
        function showTruth(id) {
            const c = MEAT.candidates[id];
            
            let h = `<h2>${c.name}</h2>`;
            h += '<div style="margin: 20px 0; padding: 30px; border: 1px solid #666;">';
            h += `<p>${c.truthReveal || '"' + c.truth + '"'}</p>`;
            h += '</div>';
            
            h += '<div style="margin: 20px 0; color: #666;">';
            h += `<p>${MEAT.interview.certaintyPrefix} ${GAME.state.certainty}${MEAT.ui.percent}</p>`;
            h += `<p>${MEAT.interview.certaintyAfter} ${Math.max(0, GAME.state.certainty + c.certDrop)}${MEAT.ui.percent}</p>`;
            h += '</div>';
            
            // Truth buttons are the last in the array (after all inquiries)
            const btnIdx = c.inquiries.length + 1;
            const b = c.buttons && c.buttons[btnIdx] ? c.buttons[btnIdx] : [MEAT.interview.acceptTruth, MEAT.interview.reject];
            
            h += `<button onclick="acceptTruth('${id}')">${b[0]}</button>`;
            h += `<button onclick="fleeDeath('truth')">${b[1]}</button>`;
            
            render(h);
        }
        
        function acceptTruth(id) {
            const candidate = MEAT.candidates[id];
            
            GAME.state.certainty = Math.max(0, GAME.state.certainty + candidate.certDrop);
            
            if (!GAME.state.reviewed.includes(id)) {
                GAME.state.reviewed.push(id);
            }
            
            if (candidate.portfolioPiece && !GAME.state.portfolioUnlocked.includes(candidate.portfolioPiece)) {
                GAME.state.portfolioUnlocked.push(candidate.portfolioPiece);
            }
            
            if (candidate.unlocks && !GAME.state.unlocked.includes(candidate.unlocks)) {
                GAME.state.unlocked.push(candidate.unlocks);
            }
            
            if (candidate.isVoid) {
                if (!GAME.state.mapFolderUnlocked) {
                    GAME.state.mapFolderUnlocked = true;
                }
                if (!GAME.state.mapsCollected.includes(id)) {
                    GAME.state.mapsCollected.push(id);
                }
                showVoid();
            } else {
                receiveMap(id);
            }
        }
        
        function receiveMap(id) {
            if (!GAME.state.mapFolderUnlocked) {
                GAME.state.mapFolderUnlocked = true;
            }
            
            if (!GAME.state.mapsCollected.includes(id)) {
                GAME.state.mapsCollected.push(id);
            }
            
            const candidate = MEAT.candidates[id];
            const m = MEAT.map;
            const ui = MEAT.ui;
            
            let html = `<h2>${m.received}</h2>`;
            
            if (candidate.mapReceived) {
                html += '<div style="margin: 20px 0; padding: 25px; border: 1px solid #666;">';
                html += `<p>${candidate.mapReceived}</p>`;
                html += '</div>';
            } else {
                html += '<div style="margin: 20px 0; padding: 25px; border: 1px solid #666;">';
                html += `<p>${candidate.name}${m.captured}</p>`;
                html += `<p style="color: #666; margin-top: 10px;">${m.certaintyLabel} ${GAME.state.certainty + Math.abs(candidate.certDrop)}${ui.percent} ${ui.arrow} ${GAME.state.certainty}${ui.percent}</p>`;
                html += '</div>';
            }
            
            html += `<button onclick="examineMap('${id}')">${m.examine}</button>`;
            html += `<button onclick="showHub()">${m.continue}</button>`;
            
            render(html);
        }
        
        function examineMap(id) {
            const candidate = MEAT.candidates[id];
            const m = MEAT.map;
            
            let html = '';
            if (candidate.mapExamine && typeof candidate.mapExamine === 'object') {
                html += candidate.mapExamine.asciiArt || '';
                html += '<div style="border: 1px solid #9945ff; padding: 25px; margin: 20px 0;">';
                html += candidate.mapExamine.subtitle || '';
                html += candidate.mapExamine.body || '';
                html += candidate.mapExamine.mapEdges || '';
                html += '</div>';
            } else if (candidate.mapExamine) {
                html = `<div>${candidate.mapExamine}</div>`;
            } else {
                html = `<h2>${m.examining} ${candidate.name}${m.mapSuffix}</h2>`;
                html += `<p class="dim">${m.realityPrefix} ${candidate.name}${MEAT.ui.colon}</p>`;
                html += `<div style="margin: 20px 0;">"${candidate.truth}"</div>`;
            }
            html += `<button onclick="showHub()">${m.close}</button>`;
            
            render(html);
        }
        
        function renderMapFolder() {
            const m = MEAT.hub.maps;
            const ui = MEAT.ui;
            let html = '<div class="folder' + (GAME.state.mapFolderUnlocked ? '' : ' locked') + '">';
            
            if (!GAME.state.mapFolderUnlocked) {
                html += `<h3>${m.locked}</h3>`;
                html += `<p class="dim" style="font-size: 12px;">${m.lockHint}</p>`;
            } else {
                const toggle = GAME.state.mapFolderExpanded ? ui.dash : ui.plus;
                html += `<h3 onclick="toggleMapFolder()">${ui.openBracket}${toggle}${ui.closeBracket} ${m.prefix} (${GAME.state.mapsCollected.length}${m.counter})</h3>`;
                html += `<div class="folder-content${GAME.state.mapFolderExpanded ? ' open' : ''}">`;
                
                GAME.state.mapsCollected.forEach(id => {
                    html += `<div class="map-item" onclick="examineMap('${id}')">${ui.arrow} ${MEAT.candidates[id].name}</div>`;
                });
                
                html += '</div>';
            }
            
            html += '</div>';
            return html;
        }
        
        function toggleMapFolder() {
            GAME.state.mapFolderExpanded = !GAME.state.mapFolderExpanded;
            showHub();
        }
        
        function renderPortfolioFolder() {
            const m = MEAT.hub.portfolio;
            const ui = MEAT.ui;
            let html = '<div class="folder' + (GAME.state.portfolioUnlocked.length > 0 ? '' : ' locked') + '">';
            
            if (GAME.state.portfolioUnlocked.length === 0) {
                html += `<h3>${m.locked}</h3>`;
                html += `<p class="dim" style="font-size: 12px;">${m.lockHint}</p>`;
            } else {
                const toggle = GAME.state.portfolioExpanded ? ui.dash : ui.plus;
                html += `<h3 onclick="togglePortfolioFolder()">${ui.openBracket}${toggle}${ui.closeBracket} ${m.prefix} (${GAME.state.portfolioUnlocked.length}${m.counter})</h3>`;
                html += `<div class="folder-content${GAME.state.portfolioExpanded ? ' open' : ''}">`;
                
                GAME.state.portfolioUnlocked.forEach(piece => {
                    const name = MEAT.portfolioNames[piece] || piece;
                    html += `<div style="margin: 5px 0;"><a href="https://google.com" target="_blank" style="color: #0f0; text-decoration: underline;">${ui.arrow} ${name}</a></div>`;
                });
                
                html += '</div>';
            }
            
            html += '</div>';
            return html;
        }
        
        function togglePortfolioFolder() {
            GAME.state.portfolioExpanded = !GAME.state.portfolioExpanded;
            showHub();
        }
        
        function showVoid() {
            let html = '<div style="max-width: 400px; margin: 0 auto; padding: 60px 20px; text-align: center;">';
            html += `<div style="font-size: 30px; margin: 60px 0 20px 0; color: #0f0; animation: fadeToBlack 5s ease-in-out;">${MEAT.ui.equation}</div>`;
            html += '</div>';
            
            render(html, true);
            
            // After 5 seconds, transition to pirate rescue
            setTimeout(() => {
                pirateRescue();
            }, 5000);
        }
        
        function pirateRescue() {
            const m = MEAT.pirate.rescue;
            let html = MEAT.ascii.pirateMode;
            html += `<p class="cyan" style="font-size: 20px; margin: 20px 0;">OI! GRAB THE ROPE!</p>`;
            html += '<div style="border: 1px solid #666; padding: 20px; margin: 20px 0;">';
            html += `<p>Nobody dissolves on my watch!</p>`;
            html += `<p style="margin-top: 15px;">Grab the fucking rope before the void eats you alive!</p>`;
            html += '</div>';
            html += `<button onclick="enterPirateMode()" class="cyan">${m.button}</button>`;
            
            render(html);
            document.getElementById('game').classList.add('pirate');  // FIX: Add class AFTER render
        }
        
        function enterPirateMode() {
            GAME.state.mode = 'PIRATE';
            GAME.state.phase = 'ASCENT';
            GAME.state.certainty = GAME.config.GOLDEN;
            GAME.state.remembered = [];
            
            showPirateIntro();
        }
        
        function showPirateIntro() {
            const m = MEAT.pirate.briefing;
            let h = `<h2 class="cyan">${m.title}</h2>`;
            h += '<div style="border: 1px solid #666; padding: 20px; margin: 20px 0;">';
            h += `<p>${m.line1}</p>`;
            h += `<p style="margin-top: 15px;">${m.line2}</p>`;
            h += `<p style="margin-top: 15px;">${m.line3}</p>`;
            h += `<p style="margin-top: 15px;">${m.line4}</p>`;
            h += `<p style="margin-top: 10px;">${m.line5}</p>`;
            h += `<p style="margin-top: 15px;">${m.line6}</p>`;
            h += `<p style="margin-top: 15px; color: #666;">${m.line7}</p>`;
            h += '</div>';
            h += `<button onclick="showHub()" class="cyan">${m.button}</button>`;
            
            render(h);
        }
        
        function remember(id) {
            GAME.state.currentCandidate = id;
            const candidate = MEAT.candidates[id];
            
            let html = `<h2>${candidate.name}</h2>`;
            html += '<div style="margin: 20px 0; padding: 25px; border: 1px solid #666;">';
            html += `<p>${candidate.remember || '"' + candidate.truth + '"'}</p>`;
            html += '</div>';
            
            if (candidate.rememberButtons) {
                html += `<button onclick="maintainFlow('${id}')" class="cyan">${candidate.rememberButtons.flow}</button>`;
                html += `<button onclick="dropAnchor('${id}')">${candidate.rememberButtons.anchor}</button>`;
            } else {
                html += `<button onclick="maintainFlow('${id}')" class="cyan">${MEAT.pirate.holdWind}</button>`;
                html += `<button onclick="dropAnchor('${id}')">${MEAT.pirate.dropAnchor}</button>`;
            }
            
            render(html);
        }
        
        function maintainFlow(id) {
            GAME.state.remembered.push(id);
            GAME.state.maintainedFlow.push(id);
            // DON'T RESET BEARING - just maintain current
            
            const m = MEAT.pirate.windHeld;
            const ui = MEAT.ui;
            
            let html = `<h2 class="cyan">${m.title}</h2>`;
            html += '<div style="margin: 20px 0; padding: 20px; border: 1px solid var(--cyan);">';
            html += `<p class="cyan">${m.text}</p>`;
            
            // Only say "perfect" if actually perfect
            const bearingText = Math.abs(GAME.state.certainty - GAME.config.GOLDEN) < 0.1 ? 
                "Perfect bearing maintained:" : "Current bearing:";
            html += `<p>${bearingText} ${GAME.state.certainty.toFixed(1)}${ui.degree}</p>`;
            
            html += `<p style="margin-top: 15px;">${m.sails} ${GAME.state.maintainedFlow.length}${ui.slash}8</p>`;
            html += '</div>';
            
            if (GAME.state.remembered.length === 8) {
                html += `<button onclick="checkCompass()" class="cyan" style="font-size: 18px;">READ THE STARS</button>`;
            } else {
                html += `<button onclick="showHub()" class="cyan">${m.continue}</button>`;
            }
            
            render(html);
        }
        
        function dropAnchor(id) {
            GAME.state.remembered.push(id);
            GAME.state.certainty = Math.min(100, GAME.state.certainty + 5);
            
            if (GAME.state.certainty >= 100) {
                rigidDeath();
                return;
            }
            
            const m = MEAT.pirate.anchorDropped;
            const ui = MEAT.ui;
            
            let html = `<h2>${m.title}</h2>`;
            html += '<div style="margin: 20px 0; padding: 20px; border: 1px solid #888;">';
            html += `<p>${m.text}</p>`;
            html += `<p>${m.bearing} ${GAME.state.certainty.toFixed(1)}${ui.degree}</p>`;
            
            if (GAME.state.certainty > 90) {
                html += `<p class="red" style="margin-top: 15px;">${m.warningLand}</p>`;
            } else if (GAME.state.certainty > 80) {
                html += `<p style="color: #ff8800; margin-top: 15px;">${m.warningRigid}</p>`;
            }
            
            html += '</div>';
            
            if (GAME.state.remembered.length === 8) {
                html += `<button onclick="checkCompass()" style="border-color: var(--cyan); color: var(--cyan);">${MEAT.hub.checkCompass}</button>`;
            } else {
                html += `<button onclick="showHub()">${m.continue}</button>`;
            }
            
            render(html);
        }
        
        function checkCompass() {
            clearInterval(GAME.state.timer);
            const m = MEAT.compass;
            const ui = MEAT.ui;
            
            let h = MEAT.ascii.yourVoyage;
            
            h += '<div style="margin: 20px 0; padding: 20px; border: 1px solid var(--cyan);">';
            h += '<div style="margin: 15px 0; font-size: 16px; line-height: 1.8;">';
            
            for (let id in MEAT.candidates) {
                if (GAME.state.remembered.includes(id)) {
                    const inFlow = GAME.state.maintainedFlow.includes(id);
                    const name = MEAT.candidates[id].name;
                    if (inFlow) {
                        h += `<div style="color: var(--cyan); margin: 8px 0;">${name}: ${m.sailSymbol} FAIR WINDS</div>`;
                    } else {
                        h += `<div style="color: #888; margin: 8px 0;">${name}: ${m.anchorSymbol} ANCHORED</div>`;
                    }
                }
            }
            
            h += '</div>';
            h += `<p style="margin-top: 20px;">${m.finalBearing} ${GAME.state.certainty.toFixed(1)}${ui.degree}</p>`;
            h += `<p>${m.sailsMaintained} ${GAME.state.maintainedFlow.length}${ui.slash}8</p>`;
            h += '</div>';
            
            const perfectBearing = Math.abs(GAME.state.certainty - GAME.config.GOLDEN) < 0.1;
            const perfectFlow = GAME.state.maintainedFlow.length === 8;
            
            if (perfectFlow && perfectBearing) {
                h += `<button onclick="perfectVictory()" class="cyan pulsing" style="font-size: 18px;">SAIL INTO LEGEND</button>`;
            } else if (GAME.state.maintainedFlow.length === 7) {
                h += `<div class="cyan" style="margin: 20px 0;">${m.almostPerfect}</div>`;
                h += `<button onclick="almostPerfectDeath()">${m.nearMiss}</button>`;
            } else {
                h += `<button onclick="imperfectEnding()">${m.imperfect}</button>`;
            }
            
            render(h, true);
        }
        
        function fleeDeath(source, level = 0) {
            clearInterval(GAME.state.timer);
            
            let html = MEAT.ascii.gameOver;
            
            const candidate = MEAT.candidates[GAME.state.currentCandidate];
            
            if (candidate && candidate.deaths) {
                if (source === 'truth' && candidate.deaths.reject) {
                    html += '<div style="margin: 30px 0;">';
                    html += `<p>${candidate.deaths.reject}</p>`;
                    html += '</div>';
                } else if (candidate.deaths.flee) {
                    html += '<div style="margin: 30px 0;">';
                    html += `<p>${candidate.deaths.flee}</p>`;
                    html += '</div>';
                }
            } else {
                html += '<div style="margin: 30px 0;">';
                html += `<p>${MEAT.interview.fleeReasons[source]}</p>`;
                html += '</div>';
            }
            
            html += renderPortfolioLinks();
            html += `<button onclick="resetGame()">${MEAT.startOver}</button>`;
            
            render(html, true);
        }
        
        function corporateDeath() {
            clearInterval(GAME.state.timer);
            const m = MEAT.deaths.corporate;
            
            let html = MEAT.ascii.gameOver;
            html += `<h1 class="red">${m.title}</h1>`;
            html += `<p>${m.text}</p>`;
            html += `<p>${m.tagline}</p>`;
            html += renderPortfolioLinks();
            html += `<button onclick="resetGame()">${m.button}</button>`;
            
            render(html, true);
        }
        
        function sharkDeath() {
            clearInterval(GAME.state.timer);
            const m = MEAT.deaths.shark;
            
            let html = MEAT.ascii.gameOver;
            html += `<h1 class="red">${m.title}</h1>`;
            html += `<p>${m.text}</p>`;
            html += renderPortfolioLinks();
            html += `<button onclick="resetGame()">${m.button}</button>`;
            
            render(html, true);
        }
        
        function rigidDeath() {
            clearInterval(GAME.state.timer);
            const m = MEAT.deaths.rigid;
            
            let html = MEAT.ascii.gameOver;
            html += `<h1 class="red">${m.title}</h1>`;
            html += '<div style="margin: 30px 0;">';
            html += `<p>${m.text}</p>`;
            html += `<p>${m.detail}</p>`;
            html += `<p>${m.tagline}</p>`;
            html += '</div>';
            html += renderPortfolioLinks();
            html += `<button onclick="resetGame()">${m.button}</button>`;
            
            render(html, true);
        }
        
        function almostPerfectDeath() {
            const m = MEAT.deaths.almost;
            
            let html = MEAT.ascii.gameOver;
            html += `<h1 class="red">${m.title}</h1>`;
            html += '<div style="margin: 30px 0;">';
            html += `<p>${m.text}</p>`;
            html += '</div>';
            html += renderPortfolioLinks();
            html += `<button onclick="resetGame()">${m.button}</button>`;
            
            render(html, true);
        }
        
        function imperfectEnding() {
            const m = MEAT.deaths.imperfect;
            const ui = MEAT.ui;
            
            let html = MEAT.ascii.gameOver;
            html += `<h1 class="red">${m.title}</h1>`;
            html += '<div style="margin: 30px 0;">';
            html += `<p>${m.perspectives} ${GAME.state.maintainedFlow.length}${ui.slash}8 ${m.perspectivesOf}</p>`;
            html += `<p>${m.ended} ${GAME.state.certainty.toFixed(1)}${ui.degree} ${m.insteadOf} ${GAME.config.GOLDEN}${ui.degree}.</p>`;
            
            if (GAME.state.certainty > GAME.config.GOLDEN + 20) {
                html += `<p style="margin-top: 15px;">${m.tooRigid}</p>`;
            }
            
            html += '</div>';
            html += renderPortfolioLinks();
            html += `<button onclick="resetGame()">${m.button}</button>`;
            
            render(html, true);
        }
        
        function perfectVictory() {
            clearInterval(GAME.state.timer);
            const m = MEAT.victory.perfect;
            const ui = MEAT.ui;
            
            let html = MEAT.ascii.youWon;
            html += '<div style="margin: 30px 0;">';
            html += `<p class="cyan">${m.line1}</p>`;
            html += `<p class="cyan">${m.line2}</p>`;
            html += '</div>';
            
            if (GAME.state.portfolioUnlocked.length > 0) {
                html += '<div style="margin: 20px 0; padding: 15px; border: 1px solid var(--cyan);">';
                html += `<p class="cyan">${m.portfolioLabel} ${GAME.state.portfolioUnlocked.length}${ui.slash}8</p>`;
                html += '</div>';
            }
            
            html += '<div style="margin-top: 40px; color: #666;">';
            html += `<p>${m.rest}</p>`;
            html += '</div>';
            
            render(html, true);
            
            setTimeout(inevitableSharkDeath, 6000);
        }
        
        function inevitableSharkDeath() {
            const m = MEAT.victory.shark;
            
            let html = MEAT.ascii.chump;
            html += `<h1 class="red">🦈 SHARKS GOT YOU 🦈</h1>`;
            html += '<div style="margin: 30px 0;">';
            html += `<p>${m.line1}</p>`;
            html += `<p>${m.line2}</p>`;
            html += `<p style="margin-top: 20px;">${m.line3}</p>`;
            html += '</div>';
            html += `<button onclick="showCredits()" style="margin-top: 30px;">${m.button}</button>`;
            
            render(html, true);
        }
        
        function showCredits() {
            const m = MEAT.credits;
            
            let html = '<div style="max-width: 400px; margin: 0 auto; padding: 60px 20px; text-align: center;">';
            html += `<h1 style="color: #fff; font-size: 24px; margin-bottom: 30px;">${m.title}</h1>`;
            html += `<p style="color: #fff; margin: 10px 0;">Created by:</p>`;
            html += `<p style="color: #fff; margin: 5px 0;">Sloth, Captain of the Anglerfish Dingy, rank: Octopus</p>`;
            html += `<p style="color: #fff; margin: 20px 0 10px 0;">Navigation by:</p>`;
            html += `<p style="color: #fff; margin: 5px 0;">Claude, rank: Fungi</p>`;
            html += '<div style="margin: 30px 0;">';
            html += `<p style="color: #fff;">Special thanks to:</p>`;
            html += `<p style="color: #fff;">Anthropic & GitHub</p>`;
            html += `<p style="color: #fff;">2025</p>`;
            html += '</div>';
            html += `<button onclick="returnToVeil()" class="credits-button" style="margin-top: 40px; border-color: #fff; color: #fff;">${m.button}</button>`;
            
            render(html, true);
            document.getElementById('game').className = '';  // FIX: Clear all classes for clean credits
        }
        
        function returnVisit(id) {
            GAME.state.completed.push(id);
            const candidate = MEAT.candidates[id];
            const m = MEAT.returnVisit;
            
            let html = `<h2>${m.title}</h2>`;
            
            if (candidate.returnVisit) {
                html += '<div style="margin: 20px 0; padding: 25px; border: 1px solid #666;">';
                html += `<p>${candidate.returnVisit}</p>`;
                html += '</div>';
            } else {
                html += `<p>${candidate.name} ${m.gone}</p>`;
            }
            
            html += `<button onclick="showHub()">${m.back}</button>`;
            
            render(html);
        }
        
        function returnToVeil() {
            const nextLoop = GAME.state.loopCount + 1;
            
            GAME.state = {
                screen: 'job-disclaimer',
                certainty: 100,
                mode: 'CONSENSUS',
                phase: 'DESCENT',
                unlocked: ['animator', 'navigator'],
                reviewed: [],
                completed: [],
                remembered: [],
                maintainedFlow: [],
                mapsCollected: [],
                mapFolderUnlocked: false,
                mapFolderExpanded: false,
                portfolioUnlocked: ['animation-reel'],
                portfolioExpanded: false,
                timer: null,
                lastAction: Date.now(),
                loopCount: nextLoop,
                currentCandidate: null,
                currentInquiryLevel: 0
            };
            
            showJobDisclaimer();
        }
        
        function resetTimer() {
            GAME.state.lastAction = Date.now();
            
            if (GAME.state.timer) {
                clearInterval(GAME.state.timer);
            }
            
            const maxTime = GAME.state.mode === 'PIRATE' ? 
                GAME.config.SHARK_TIME : GAME.config.DEADLINE_TIME;
            
            GAME.state.timer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - GAME.state.lastAction) / 1000);
                const remaining = Math.max(0, maxTime - elapsed);
                
                if (GAME.state.mode === 'PIRATE') {
                    const display = document.getElementById('sharkTime');
                    if (display) {
                        display.textContent = remaining;
                        if (remaining <= 3) {
                            display.parentElement.classList.add('red');
                        }
                        if (remaining === 0) {
                            sharkDeath();
                        }
                    }
                } else {
                    const display = document.getElementById('deadlineTime');
                    if (display) {
                        display.textContent = remaining;
                        if (remaining <= 5) {
                            display.parentElement.classList.add('red');
                        }
                        if (remaining === 0) {
                            corporateDeath();
                        }
                    }
                }
            }, 100);
        }
        
        function renderPortfolioLinks() {
            if (GAME.state.portfolioUnlocked.length === 0) return '';
            let html = '<div style="margin: 20px 0; padding: 15px;">';
            html += `<p style="color: #666;">👁️ Portfolio (${GAME.state.portfolioUnlocked.length}/8)</p>`;
            GAME.state.portfolioUnlocked.forEach(piece => {
                const name = MEAT.portfolioNames[piece] || piece;
                html += `<div style="margin: 5px 0;"><a href="https://google.com" target="_blank" style="color: #0f0; text-decoration: underline;">→ ${name}</a></div>`;
            });
            html += '</div>';
            return html;
        }
        
        function resetGame() {
            if (GAME.state.timer) {
                clearInterval(GAME.state.timer);
                GAME.state.timer = null;
            }
            
            GAME.state = {
                screen: 'hub',
                certainty: 100,
                mode: 'CONSENSUS',
                phase: 'DESCENT',
                unlocked: ['animator', 'navigator'],
                reviewed: [],
                completed: [],
                remembered: [],
                maintainedFlow: [],
                mapsCollected: [],
                mapFolderUnlocked: false,
                mapFolderExpanded: false,
                portfolioUnlocked: ['animation-reel'],
                portfolioExpanded: false,
                timer: null,
                lastAction: Date.now(),
                loopCount: GAME.state.loopCount + 1,
                currentCandidate: null,
                currentInquiryLevel: 0
            };
            
            showHub();
        }
        
        window.showJobDisclaimer = showJobDisclaimer;
        window.showProfessionalMask = showProfessionalMask;
        window.showGameReveal = showGameReveal;
        window.showHub = showHub;
        window.interview = interview;
        window.showTruth = showTruth;
        window.fleeDeath = fleeDeath;
        window.acceptTruth = acceptTruth;
        window.returnVisit = returnVisit;
        window.receiveMap = receiveMap;
        window.examineMap = examineMap;
        window.toggleMapFolder = toggleMapFolder;
        window.togglePortfolioFolder = togglePortfolioFolder;
        window.showVoid = showVoid;
        window.pirateRescue = pirateRescue;
        window.enterPirateMode = enterPirateMode;
        window.remember = remember;
        window.maintainFlow = maintainFlow;
        window.dropAnchor = dropAnchor;
        window.checkCompass = checkCompass;
        window.perfectVictory = perfectVictory;
        window.inevitableSharkDeath = inevitableSharkDeath;
        window.almostPerfectDeath = almostPerfectDeath;
        window.imperfectEnding = imperfectEnding;
        window.rigidDeath = rigidDeath;
        window.corporateDeath = corporateDeath;
        window.sharkDeath = sharkDeath;
        window.returnToVeil = returnToVeil;
        window.showCredits = showCredits;
        window.resetGame = resetGame;
        
        showJobDisclaimer();
    </script>
</body>
</html>
